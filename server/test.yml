config:
  target: 'http://localhost:8009'
  processor: "./stressgenerator.js"
  phases:
    - duration: 10
      arrivalRate: 1
      name: "Warm up"
    - pause: 20
    - duration: 30
      arrivalRate: 1
      rampTo: 10
      maxVusers: 10
      name: "10 users"
    - pause: 30
    - duration: 60
      arrivalRate: 10
      rampTo: 100
      maxVusers: 100
      name: "100 users"
    - pause: 60
    - duration: 180
      arrivalRate: 1000
      rampTo: 1000
      maxVusers: 1000
      name: "Sustained max load at 1K"
scenarios:
  - flow:
    - function: "generateRandomData"
    - get:
        url: "/api/items/{{id}}"
    - log: "Sent request to id: {{id}}"
    - post:
        url: "/api/items"
        json:
          itemId: "{{itemId}}"
          altImages: "{{altImages}}"
    - log: "Posted {{itemId}}, {{altImages}}"